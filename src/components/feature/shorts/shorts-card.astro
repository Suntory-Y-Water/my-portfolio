---
import { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';
import type { CollectionEntry } from 'astro:content';
import MarkdownContent from '@/components/feature/content/markdown-content.astro';

type Props = {
  short: CollectionEntry<'shorts'> & { body?: string };
};

const { short } = Astro.props;
---

<style>
  .shorts-card-wrapper {
    position: relative;
  }
  .shorts-card-wrapper .shorts-card-title-link::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10;
  }
</style>

<div class='shorts-card-wrapper'>
  <Card
    className='h-[480px] flex flex-col hover:shadow-lg hover:border-primary/50 transition-all overflow-hidden'
  >
    <CardHeader className='p-4 md:p-5 pb-3 space-y-1 shrink-0'>
      <CardTitle className='text-lg font-bold leading-[1.5] line-clamp-2'>
        <a
          href={`/shorts/${short.id}`}
          class='shorts-card-title-link no-underline hover:text-primary transition-colors'
        >
          {short.data.title}
        </a>
      </CardTitle>
    </CardHeader>

    <CardContent className='px-4 md:px-5 py-0 flex-1 overflow-hidden relative'>
      <div
        class='h-full text-sm leading-relaxed text-muted-foreground overflow-hidden [&_p]:my-1.5 [&_pre]:my-2 [&_pre]:text-xs [&_code]:text-xs'
      >
        {short.body && <MarkdownContent html={short.body} />}
      </div>
      <div
        class='absolute bottom-0 left-0 right-0 h-24 bg-linear-to-t from-card via-card/95 to-transparent pointer-events-none'
      >
      </div>
    </CardContent>
  </Card>
</div>
