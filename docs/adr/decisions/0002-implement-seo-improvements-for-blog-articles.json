{
  "id": "ADR-0002",
  "timestamp": "2026-01-02T00:00:00+09:00",
  "title": "Implement SEO Improvements for Blog Articles",
  "status": "accepted",
  "context": {
    "problem": "ブログのSEO実装がGoogle推奨仕様と差分があり、SNSリッチプレビュー、Google Discover露出、検索結果での最終更新日表示などの機会を逃していた。",
    "constraints": [
      "既存のフロントマター構造（modified_time）を維持",
      "Open Graph ProtocolとSchema.org公式仕様への準拠",
      "Astro 5.x SSG機能との統合",
      "ビルドパフォーマンスへの影響を最小化"
    ],
    "requirements": [
      "article:published_timeメタタグの追加（Open Graph Protocol準拠）",
      "article:modified_timeメタタグの条件分岐実装",
      "WebSite構造化データのpublisher統一（BlogPostingとの一貫性）",
      "既存のコンテンツマイグレーション不要"
    ]
  },
  "decision": {
    "summary": "Google推奨のOpen Graph ProtocolとSchema.org仕様に準拠した3つのSEO改善を実施",
    "details": "1. BaseLayoutにarticleプロパティを追加し、og:type='article'の場合にarticle:published_time、article:modified_time、article:author、article:section、article:tagメタタグを出力。2. JSON-LDのdateModifiedを、modified_timeフィールドが存在する場合のみ設定するよう条件分岐を実装。3. WebSite構造化データのpublisherをPersonからOrganizationに変更し、publisher.imageをpublisher.logoに変更してBlogPostingと統一。",
    "alternatives": [
      {
        "option": "フロントマター構造を変更してlastModifiedフィールドを追加",
        "pros": ["より明示的なフィールド名", "新規プロジェクトでは採用しやすい"],
        "cons": ["既存記事の一括マイグレーションが必要", "破壊的変更"],
        "rejected": true,
        "reason": "既存のmodified_timeフィールドで十分に要件を満たせるため、破壊的変更を避けた"
      },
      {
        "option": "dateModifiedを常に出力（datePublishedと同じ値）",
        "pros": ["実装がシンプル", "すべての記事で一貫性がある"],
        "cons": ["Googleに誤った情報を伝える", "SEO評価の機会損失"],
        "rejected": true,
        "reason": "実際に更新された記事のみ更新日を伝えることがSEO最適化に重要"
      },
      {
        "option": "WebSiteのpublisherをPersonのまま維持",
        "pros": ["変更不要", "個人ブログに適している可能性"],
        "cons": ["BlogPostingとの不整合", "Googleの推奨パターンと異なる"],
        "rejected": true,
        "reason": "BlogPostingとの一貫性を保ち、Google Knowledge Graphでの表示改善のため統一"
      }
    ],
    "rationale": "Open Graph ProtocolとSchema.org公式仕様に準拠することで、SNSでのリッチプレビュー改善、Google Discoverでの露出向上、検索結果での最終更新日表示、Knowledge Graphでの表示改善など、複数のSEO効果を短時間で実現できる。既存のmodified_timeフィールドを活用することで、破壊的変更を避けつつ要件を満たせる。",
    "consequences": [
      "SNSシェア時のリッチプレビューに公開日・更新日が表示される",
      "Google Discoverでの記事露出が向上する可能性",
      "検索結果に最終更新日が表示される（modified_timeがある記事のみ）",
      "Google Knowledge Graphでの表示が改善される",
      "構造化データテストツールでの警告が解消される",
      "ビルド時間への影響は最小限（メタタグ追加のみ）"
    ]
  },
  "implementation": {
    "affected_files": [
      "src/layouts/BaseLayout.astro",
      "src/pages/blog/[slug].astro"
    ],
    "affected_components": [
      "BaseLayout",
      "BlogPostPage"
    ],
    "code_patterns": [
      "Conditional meta tag rendering in Astro",
      "JSON-LD structured data optimization",
      "Open Graph Protocol article metadata"
    ],
    "examples": [
      {
        "file": "src/layouts/BaseLayout.astro",
        "line_start": 17,
        "line_end": 24,
        "description": "article型プロパティの追加（publishedTime, modifiedTime, author, section, tags）"
      },
      {
        "file": "src/layouts/BaseLayout.astro",
        "line_start": 78,
        "line_end": 104,
        "description": "article:*メタタグの条件付き出力（og:type='article'の場合のみ）"
      },
      {
        "file": "src/layouts/BaseLayout.astro",
        "line_start": 43,
        "line_end": 56,
        "description": "WebSite構造化データのpublisherをOrganizationに統一"
      },
      {
        "file": "src/pages/blog/[slug].astro",
        "line_start": 59,
        "line_end": 83,
        "description": "BlogPosting構造化データのdateModified条件分岐"
      },
      {
        "file": "src/pages/blog/[slug].astro",
        "line_start": 102,
        "line_end": 108,
        "description": "BaseLayoutへのarticle propsの渡し方"
      }
    ]
  },
  "metadata": {
    "tags": ["seo", "opengraph", "schema-org", "structured-data", "metadata"],
    "related_adrs": [],
    "supersedes": null,
    "superseded_by": null,
    "author": "Claude Sonnet 4.5",
    "reviewers": []
  },
  "search_keywords": [
    "SEO optimization",
    "Open Graph Protocol",
    "Schema.org",
    "article:published_time",
    "article:modified_time",
    "dateModified",
    "JSON-LD",
    "structured data",
    "Google Discover",
    "rich preview",
    "meta tags",
    "OGP",
    "Knowledge Graph",
    "publisher organization"
  ],
  "vector_embedding": null
}
