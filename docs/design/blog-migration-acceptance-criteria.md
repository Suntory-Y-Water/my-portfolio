# ブログ記事管理システム移行 受入基準書

**文書番号**: ACC-2025-001
**作成日**: 2025-11-14
**バージョン**: 1.0
**ステータス**: Active

---

## 1. 受入基準の概要

### 1.1 目的
ブログ記事管理システムのMDX→Markdown移行が正常に完了したことを判定する基準を定める。

### 1.2 受入の条件
以下の全ての基準を満たした場合、移行が完了したと判定する。

---

## 2. 必須受入基準（Must Have）

すべての項目を満たす必要がある。1つでも満たさない場合、移行は未完了と判定される。

### 2.1 ファイル配置

#### AC-001: ファイルの配置場所
- [ ] 全13記事が`content/blog/`配下に配置されている
- [ ] `src/content/blog/`配下にMDXファイルが残っていない
- [ ] ファイル数が移行前と一致している（13件）

**検証方法**:
```bash
# content/blog/のファイル数確認
ls content/blog/*.md | wc -l  # 期待値: 13

# src/content/blog/にMDXファイルが残っていないか確認
ls src/content/blog/*.mdx 2>/dev/null | wc -l  # 期待値: 0
```

**担当**: 開発者
**Phase**: Phase 2終了時

---

#### AC-002: ファイル拡張子
- [ ] 全記事が`.md`拡張子になっている
- [ ] `.mdx`拡張子のファイルが残っていない

**検証方法**:
```bash
# .md拡張子のファイル数
ls content/blog/*.md | wc -l  # 期待値: 13

# .mdx拡張子のファイル数
ls content/blog/*.mdx 2>/dev/null | wc -l  # 期待値: 0
```

**担当**: 開発者
**Phase**: Phase 2終了時

---

### 2.2 コンテンツ変換

#### AC-003: MDXコンポーネントの変換
- [ ] `<LinkPreview>`構文が残っていない（46箇所全て変換済み）
- [ ] `<Callout>`構文が残っていない（8箇所全て変換済み）
- [ ] `<Image>`構文が残っていない（11箇所全て変換済み）

**検証方法**:
```bash
# LinkPreview構文の検索（ヒットしないことを確認）
grep -r "<LinkPreview" content/blog/*.md  # 期待値: 結果なし

# Callout構文の検索
grep -r "<Callout" content/blog/*.md  # 期待値: 結果なし

# Image構文の検索（標準imgタグは除く）
grep -r "<Image " content/blog/*.md  # 期待値: 結果なし
```

**担当**: 開発者
**Phase**: Phase 2終了時

---

#### AC-004: フロントマターの保持
- [ ] 全記事のフロントマターが正しく保持されている
- [ ] `title`, `date`, `description`, `tags`フィールドが欠損していない

**検証方法**:
```bash
# フロントマター検証スクリプトを実行
pnpm run check:frontmatter

# 手動確認（サンプル）
head -n 10 content/blog/add-blog-to-portfolio.md
```

**担当**: 開発者
**Phase**: Phase 2終了時

---

### 2.3 ビルド＆デプロイ

#### AC-005: ビルド成功
- [ ] `pnpm run build`がエラーなく完了する
- [ ] ビルド時間が現状比150%以内
- [ ] ビルド成果物（`.next/`）が正常に生成される

**検証方法**:
```bash
# クリーンビルド
rm -rf .next/
time pnpm run build

# ビルド成功の確認
echo $?  # 期待値: 0（終了コード）
```

**担当**: 開発者
**Phase**: Phase 3終了時

---

#### AC-006: 静的解析パス
- [ ] `pnpm run typecheck`がエラーなく完了する
- [ ] `pnpm run lint`がエラーなく完了する
- [ ] `pnpm run check:tags`がエラーなく完了する

**検証方法**:
```bash
pnpm run typecheck && pnpm run lint && pnpm run check:tags
echo $?  # 期待値: 0
```

**担当**: 開発者
**Phase**: Phase 3終了時

---

#### AC-007: 本番デプロイ成功
- [ ] GitHub Actionsでビルド成功
- [ ] Vercel/Cloudflare Pagesで自動デプロイ成功
- [ ] デプロイ後にエラーログがない

**検証方法**:
- GitHub Actionsのビルドログを確認
- デプロイプラットフォームのログを確認

**担当**: 開発者
**Phase**: Phase 4終了時

---

### 2.4 機能動作

#### AC-008: 全記事の表示確認
- [ ] 全13記事が個別ページで正しく表示される
- [ ] タイトル、日付、タグが表示される
- [ ] 本文が正しくレンダリングされる

**検証方法**:
```bash
# ローカル開発サーバーで確認
pnpm run dev

# 各記事にアクセス
# http://localhost:3000/blog/add-blog-to-portfolio
# http://localhost:3000/blog/...（全13記事）
```

**担当**: 開発者
**Phase**: Phase 4

---

#### AC-009: LinkPreview機能
- [ ] 外部リンクがカード形式で表示される
- [ ] OGP情報（タイトル、説明、画像）が取得・表示される
- [ ] リンクカードのクリックで外部サイトに遷移する

**検証方法**:
- ブラウザで記事を開き、LinkPreviewが表示されることを目視確認
- DevToolsでOGP情報の取得を確認

**担当**: 開発者＋QA
**Phase**: Phase 4

---

#### AC-010: Callout機能
- [ ] GFM Alerts記法が正しく表示される
- [ ] NOTE/WARNING/TIP等のタイプに応じたスタイルが適用される
- [ ] アイコンと背景色が表示される

**検証方法**:
- Calloutを含む記事を開き、目視確認
- CSSスタイルが適用されていることを確認

**担当**: 開発者＋QA
**Phase**: Phase 4

---

#### AC-011: タグ機能
- [ ] 記事詳細ページでタグが表示される
- [ ] タグリンクをクリックすると該当タグページに遷移する
- [ ] タグページで記事一覧が表示される
- [ ] タグURLがslug形式になっている（例: `/tags/vscode`）

**検証方法**:
```bash
# タグページへアクセス
# http://localhost:3000/tags/vscode
# http://localhost:3000/tags/nextjs
```

**担当**: 開発者
**Phase**: Phase 4

---

#### AC-012: 目次機能
- [ ] 記事に目次が表示される
- [ ] 目次リンクをクリックすると該当見出しにスクロールする
- [ ] アンカーリンクが正しく機能する

**検証方法**:
- 見出しが複数ある記事を開き、目次を確認
- 目次リンクのクリック動作を確認

**担当**: 開発者
**Phase**: Phase 4

---

### 2.5 Obsidian対応

#### AC-013: Obsidianでのボルト設定
- [ ] Obsidianで`content/`をボルトとして開ける
- [ ] ボルト内で全13記事がリスト表示される
- [ ] フォルダ構造が正しく表示される

**検証方法**:
1. Obsidianを起動
2. 「Open folder as vault」で`content/`を選択
3. ファイルリストを確認

**担当**: 開発者
**Phase**: Phase 4

---

#### AC-014: Obsidianでのプレビュー
- [ ] Markdown記法がObsidianで正しくプレビューされる
- [ ] 見出し、リスト、コードブロックが表示される
- [ ] リンクが機能する
- [ ] GFM Alertsが表示される（または適切にフォールバック）

**検証方法**:
- Obsidianでランダムに5記事を開く
- プレビューモードで表示を確認

**担当**: 開発者
**Phase**: Phase 4

---

#### AC-015: Obsidianでの編集
- [ ] Obsidianで記事を編集できる
- [ ] 編集後、gitで差分が確認できる
- [ ] 編集後のビルドが成功する

**検証方法**:
1. Obsidianで新規記事を作成
2. フロントマターと本文を記載
3. 保存後、`git diff`で確認
4. `pnpm run build`でビルド成功を確認

**担当**: 開発者
**Phase**: Phase 4

---

### 2.6 SEO＆パフォーマンス

#### AC-016: URL維持
- [ ] 既存記事のURLが変更されていない
- [ ] `/blog/{slug}`形式が維持されている
- [ ] リダイレクトが発生していない

**検証方法**:
```bash
# 既存URLにアクセス
curl -I http://localhost:3000/blog/add-blog-to-portfolio
# 期待値: 200 OK（302リダイレクトではない）
```

**担当**: 開発者
**Phase**: Phase 4

---

#### AC-017: OGP画像
- [ ] OGP画像が生成される
- [ ] `/blog/ogp/{slug}`でアクセス可能
- [ ] 画像サイズが1200x630px

**検証方法**:
```bash
curl -I http://localhost:3000/blog/ogp/add-blog-to-portfolio
# 期待値: 200 OK
```

**担当**: 開発者
**Phase**: Phase 4

---

#### AC-018: 構造化データ
- [ ] JSON-LDが出力されている
- [ ] `@type: BlogPosting`が含まれる
- [ ] Google Rich Results Testでエラーがない

**検証方法**:
- ブラウザでページソースを表示
- `<script type="application/ld+json">`を確認
- [Google Rich Results Test](https://search.google.com/test/rich-results)で検証

**担当**: 開発者＋QA
**Phase**: Phase 4

---

#### AC-019: パフォーマンス
- [ ] Lighthouse スコアが90以上（Performance）
- [ ] First Contentful Paint (FCP) が1.5秒以内
- [ ] Largest Contentful Paint (LCP) が2.5秒以内

**検証方法**:
- Chrome DevToolsのLighthouseで計測
- 3回計測して平均値を算出

**担当**: 開発者＋QA
**Phase**: Phase 4

---

## 3. 推奨受入基準（Should Have）

以下は推奨基準であり、必須ではないが実施することが望ましい。

### 3.1 ドキュメント

#### AC-020: 移行ドキュメント
- [ ] 移行手順書が作成されている
- [ ] 新規記事作成方法が記載されている
- [ ] Obsidian設定方法が記載されている

**検証方法**:
- `content/README.md`が存在する
- 記載内容が正確である

**担当**: 開発者
**Phase**: Phase 4

---

### 3.2 運用

#### AC-021: CI/CDパイプライン
- [ ] GitHub Actionsでビルド＆テストが自動実行される
- [ ] `check:tags`がCIに含まれている
- [ ] デプロイが自動化されている

**検証方法**:
- `.github/workflows/ci.yml`を確認
- PRを作成してCI実行を確認

**担当**: 開発者
**Phase**: Phase 4

---

## 4. 除外基準（Out of Scope）

以下は受入基準に含まれない（本移行のスコープ外）。

- [ ] ブログデザインの刷新
- [ ] 新機能の追加（検索機能、コメント機能等）
- [ ] 既存記事の大幅なリライト
- [ ] Contentful CMS連携
- [ ] 画像の最適化・圧縮

---

## 5. 受入テスト実施記録

### 5.1 テストケース一覧

| テストID | テスト項目 | 実施日 | 結果 | 備考 |
|---------|----------|--------|------|------|
| AC-001 | ファイルの配置場所 | - | - | - |
| AC-002 | ファイル拡張子 | - | - | - |
| AC-003 | MDXコンポーネントの変換 | - | - | - |
| AC-004 | フロントマターの保持 | - | - | - |
| AC-005 | ビルド成功 | - | - | - |
| AC-006 | 静的解析パス | - | - | - |
| AC-007 | 本番デプロイ成功 | - | - | - |
| AC-008 | 全記事の表示確認 | - | - | - |
| AC-009 | LinkPreview機能 | - | - | - |
| AC-010 | Callout機能 | - | - | - |
| AC-011 | タグ機能 | - | - | - |
| AC-012 | 目次機能 | - | - | - |
| AC-013 | Obsidianでのボルト設定 | - | - | - |
| AC-014 | Obsidianでのプレビュー | - | - | - |
| AC-015 | Obsidianでの編集 | - | - | - |
| AC-016 | URL維持 | - | - | - |
| AC-017 | OGP画像 | - | - | - |
| AC-018 | 構造化データ | - | - | - |
| AC-019 | パフォーマンス | - | - | - |
| AC-020 | 移行ドキュメント | - | - | - |
| AC-021 | CI/CDパイプライン | - | - | - |

### 5.2 結果サマリー

**実施日**: -
**テスト実施者**: -
**テスト環境**: -

| カテゴリ | 合格 | 不合格 | 未実施 |
|---------|------|--------|--------|
| ファイル配置（2項目） | - | - | - |
| コンテンツ変換（2項目） | - | - | - |
| ビルド＆デプロイ（3項目） | - | - | - |
| 機能動作（5項目） | - | - | - |
| Obsidian対応（3項目） | - | - | - |
| SEO＆パフォーマンス（4項目） | - | - | - |
| 推奨基準（2項目） | - | - | - |
| **合計（21項目）** | - | - | - |

---

## 6. 受入判定

### 6.1 判定基準
- **合格**: 必須受入基準（AC-001〜AC-019）の全てが合格
- **条件付き合格**: 必須基準の90%以上が合格、かつ不合格項目が軽微
- **不合格**: 必須基準の90%未満が合格、またはクリティカルな不合格項目あり

### 6.2 判定結果

**判定日**: -
**判定者**: -
**判定結果**: -

- [ ] 合格
- [ ] 条件付き合格（条件: ）
- [ ] 不合格（理由: ）

---

## 7. 関連ドキュメント

- [要件定義書](./blog-migration-requirements.md)
- [移行計画書](./blog-migration-plan.md)
- [リスク管理表](./blog-migration-risks.md)

---

## 8. 承認履歴

| 日付 | 承認者 | ステータス | 備考 |
|------|--------|-----------|------|
| 2025-11-14 | - | Draft | 初版作成 |
| - | - | - | - |

---

## 9. 変更履歴

| バージョン | 日付 | 変更内容 | 変更者 |
|-----------|------|---------|--------|
| 1.0 | 2025-11-14 | 初版作成 | Claude Code |
