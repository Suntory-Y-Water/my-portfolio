---
title: "Playwrightã§ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒä»˜ä¸ã•ã‚Œã¦ã„ã‚‹ãƒšãƒ¼ã‚¸ã®URLã‚’å–å¾—ã™ã‚‹"
emoji: "ğŸ‘º"
type: "tech"
topics:
  - "ãƒ†ã‚¹ãƒˆ"
  - "playwright"
  - "e2e"
published: true
published_at: "2024-09-26 07:59"
---

# çµè«–
`page.on()`ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ç›£è¦–ã—ã¦ã€ç‰¹å®šã®URLã ã‘ã‚’å–å¾—ã™ã‚Œã°å¯èƒ½ã§ã™ã€‚

```tsx
    // ç¾åœ¨ã®URLã‚’å–å¾—ã™ã‚‹
  page.on('response', async (response) => {
    // ãƒ¬ã‚¹ãƒãƒ³ã‚¹URLã‚’å–å¾—ã™ã‚‹
    const responseURL = response.url();
    console.log('ğŸš€ ~ page.on ~ response:', response);
  });
```

# ç¢ºèªæ–¹æ³•
`response.url`ã®å†…å®¹ã¯Chrome DevToolsã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆURLã‚’è¦‹ã‚Œã°ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/d221c61acde1-20240926.png)
*Chrome DevTools ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ãƒ–ã®å†…å®¹*

![](https://storage.googleapis.com/zenn-user-upload/61089d54f0be-20240926.png)
*ãƒªã‚¯ã‚¨ã‚¹ãƒˆURLã®ä½ç½®*

ä½¿ç”¨ä¾‹ã¨ã—ã¦ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã€ç‰¹å®šã®ãƒšãƒ¼ã‚¸URL(ã“ã®å ´åˆ`inori-track.vercel.app/venue`)ã®é€šä¿¡ã ã‘ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã€ãã“ã«ç´ã¥ãã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’`searchParams.getAll('hoge');`ã§å–å¾—ã—ã¾ã™ã€‚
```tsx
  // ç¾åœ¨ã®URLã‚’å–å¾—ã™ã‚‹
  page.on('response', async (response) => {
    // ãƒ¬ã‚¹ãƒãƒ³ã‚¹URLã‚’å–å¾—ã™ã‚‹
    const responseURL = response.url();

    // ãƒ¬ã‚¹ãƒãƒ³ã‚¹URLãŒinori-track.vercel.app/venueã®ã‚‚ã®ã ã‘ã‚’æŠ½å‡ºã™ã‚‹ã€‚
    if (responseURL.match(/inori-track.vercel.app\/venue/g)) {
      const url = new URL(responseURL);
      // ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹
      const params = url.searchParams.getAll('live_id');

      // ä»¥ä¸‹å›ºæœ‰ã®å‡¦ç†ãªã®ã§æ°—ã«ã—ãªãã¦ã‚‚OK
      // IDã«ç´ã¥ãä¼šå ´åã‚’å–å¾—ã™ã‚‹
      const venueList = liveNames.filter((live) => params.includes(live.id));

      // ä¼šå ´åãŒç”»é¢ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
      for (const venue of venueList) {
        await expect(page.getByLabel(venue.name)).toBeVisible();
      }
    }
  });
```

# å‚è€ƒ

https://zenn.dev/masa5714/articles/12c917e065a108
