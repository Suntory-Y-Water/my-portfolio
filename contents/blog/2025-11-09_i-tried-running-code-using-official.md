---
title: Anthropicå…¬å¼ã®MCPã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œã‚’serena MCPã§è©¦ã—ã¦ã¿ãŸã‘ã©ç„¡ç†ã ã£ãŸä»¶
slug: i-tried-running-code-using-official
date: 2025-11-09
modified_time: 2025-11-09
description: Anthropicã®MCPã‚³ãƒ¼ãƒ‰å®Ÿè¡Œæ‰‹æ³•ã‚’Serena MCPã§è©¦ã—ã¾ã—ãŸãŒã€ãƒ„ãƒ¼ãƒ«æ•°ãŒå¤šãå‹å®šç¾©ãŒè¤‡é›‘ãªMCPã§ã¯ã†ã¾ãã„ãã¾ã›ã‚“ã§ã—ãŸã€‚ã‚·ãƒ³ãƒ—ãƒ«ãªMCPã§ã®æ¤œè¨¼ãŒå¿…è¦ã¨ã„ã†å­¦ã³ã‚’å…±æœ‰ã—ã¾ã™ã€‚
icon: ğŸ¤®
icon_url: https://raw.githubusercontent.com/microsoft/fluentui-emoji/main/assets/Face%20vomiting/Flat/face_vomiting_flat.svg
tags:
  - MCP
  - ClaudeCode
  - Serena
---

## TL;DR

- Anthropic ã® MCP ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œæ‰‹æ³•ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ 98.7%å‰Šæ¸›ï¼‰ã‚’ Serena MCP ã§è©¦ã—ãŸãŒã†ã¾ãã„ã‹ãªã‹ã£ãŸ
- ãƒ„ãƒ¼ãƒ«æ•° 5 å€‹ä»¥ä¸‹ã€ã‚·ãƒ³ãƒ—ãƒ«ãªå‹å®šç¾©ã® MCP ã§ãªã„ã¨åŠ¹æœãŒå‡ºãªã„ã€‚Google Drive ã®ã‚ˆã†ãªã‚·ãƒ³ãƒ—ãƒ«ãª MCP ã§æ¤œè¨¼ã™ã¹ãã€‚

## ã¯ã˜ã‚ã«

Anthropic ã®è¨˜äº‹ã€Œ[Code execution with MCP: building more efficient AI agents](https://www.anthropic.com/engineering/code-execution-with-mcp)ã€ã‚’èª­ã¿ã¾ã—ãŸã€‚

https://www.anthropic.com/engineering/code-execution-with-mcp

Claude Code ã§ MCP ã‚’ç™»éŒ²ã™ã‚‹ã¨ã€ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ MCP ã®ã™ã¹ã¦ã® Tools ãŒ Context ã«åæ˜ ã•ã‚Œã€åˆæœŸçŠ¶æ…‹ã§ Context é‡ã‚’åœ§è¿«ã™ã‚‹å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ã€MCP ãƒ„ãƒ¼ãƒ«ã‚’ TypeScript ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ã‚’ 98.7%å‰Šæ¸›ã§ãã‚‹ã“ã¨ï¼ˆ150,000 ãƒˆãƒ¼ã‚¯ãƒ³ â†’ 2,000 ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ã€ä¸­é–“ãƒ‡ãƒ¼ã‚¿ã‚’ LLM ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å«ã‚ãšæœ€çµ‚çµæœã®ã¿ã‚’è¿”ã™ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

ã“ã®å†…å®¹ãŒæ°—ã«ãªã£ãŸã®ã§ã€Serena MCP ã®ãƒ„ãƒ¼ãƒ«ï¼ˆ`listDir`, `findFile`, `getSymbolsOverview` ãªã©ï¼‰ã‚’ TypeScript ã‚³ãƒ¼ãƒ‰ã‹ã‚‰å‘¼ã³å‡ºã›ã‚‹ Claude Code Skill ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚

https://github.com/Suntory-Y-Water/mcp-code-execution

å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ã¿ã‚’ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€ã‚³ãƒ¼ãƒ‰å†…ã§ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã¦ã‹ã‚‰æœ€çµ‚çµæœã®ã¿ã‚’ LLM ã«è¿”ã™ã“ã¨ã§ã€ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ã‚’å‰Šæ¸›ã§ãã‚‹ã¨è€ƒãˆã¾ã—ãŸã€‚

## æ¤œè¨¼ã®ç›®çš„

å®Ÿè£…ã—ãŸ Skill ã‚’ä½¿ã£ã¦ã€æ—¢å­˜ã® Serena MCPï¼ˆç›´æ¥ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ï¼‰ã¨ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œæ–¹å¼ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ¶ˆè²»é‡ã‚’å®Ÿæ¸¬å€¤ã¨ã—ã¦æ¯”è¼ƒã™ã‚‹ã“ã¨ãŒç›®çš„ã§ã™ã€‚ä»®èª¬ã¨ã—ã¦ã€åŒã˜ Serena MCP ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã‚‚ã€ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œæ–¹å¼ã®ã»ã†ãŒã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ¶ˆè²»é‡ãŒå°‘ãªããªã‚‹æƒ³å®šã§ã™ã€‚

æ¤œè¨¼å¯¾è±¡ã¯æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ã«ç”¨æ„ã—ãŸç°¡æ˜“çš„ãªã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°æ©Ÿèƒ½ã‚’æŒã¤ `test-parser` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® parser ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆTypeScript ãƒ•ã‚¡ã‚¤ãƒ« 10 å€‹æœªæº€ï¼‰ã‚’é¸å®šã—ã¾ã—ãŸã€‚
å°è¦æ¨¡ã§æ¤œè¨¼ã«é©ã—ã¦ãŠã‚Šã€Serena MCP ã¨åŒæ§˜ã®æ°´æº–ã§ã‚·ãƒ³ãƒœãƒ«è§£æã§ãã‚‹ã‹è©¦é¨“ã§ãã‚‹ã“ã¨ã€å®Ÿæ¸¬å€¤ã®æ¯”è¼ƒã«ååˆ†ãªè¤‡é›‘ã•ãŒã‚ã‚‹ã“ã¨ã‹ã‚‰ã€æ¤œè¨¼å¯¾è±¡ã¨ã—ã¦é©åˆ‡ã ã¨åˆ¤æ–­ã—ã¾ã—ãŸã€‚

## æ¤œè¨¼å†…å®¹

`test-parser` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® parser ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¯¾ã—ã¦ã€ä»¥ä¸‹ã® 3 ã¤ã®ã‚¿ã‚¹ã‚¯ã‚’é †æ¬¡å®Ÿè¡Œã™ã‚‹è¨ˆç”»ã‚’ç«‹ã¦ã¾ã—ãŸã€‚

1. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®å–å¾—ï¼ˆ`listDir`ï¼‰
2. TypeScript ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§åŒ–ï¼ˆ`findFile`ï¼‰
3. ã‚·ãƒ³ãƒœãƒ«æƒ…å ±ã®æŠ½å‡ºï¼ˆ`getSymbolsOverview`ï¼‰

### æ¤œè¨¼ã‚´ãƒ¼ãƒ«

- Serena MCP ç›´æ¥å‘¼ã³å‡ºã—ã¨æ¯”è¼ƒã—ã¦ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ¶ˆè²»é‡ã®å‰Šæ¸›ç‡ã‚’ç¢ºèªã™ã‚‹
- ä¸­é–“ãƒ‡ãƒ¼ã‚¿ãŒ LLM ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å«ã¾ã‚Œãªã„ã“ã¨ã‚’ç¢ºèªã™ã‚‹
- æœ€çµ‚çµæœã®ã¿ãŒè¿”ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹

### å‰ææ¡ä»¶

`test-parser` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã« `.claude/skills/mcp-code-execution` ã‚’é…ç½®ã™ã‚Œã°ã€Serena ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‚’èªè­˜ã—ã€ç›¸å¯¾ãƒ‘ã‚¹æŒ‡å®šã§ parser é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£æã§ãã‚‹ã¨æƒ³å®šã—ã¦ã„ã¾ã—ãŸã€‚

## å®Ÿè£…æ–¹é‡

Claude Code å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ã¨ã€`.claude/skills/` ã«é…ç½®ã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚­ãƒ«ã¯ã€ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ãã®ãŸã‚ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚­ãƒ«ã¨ã—ã¦é…ç½®ã™ã‚Œã°ã€Serena ã¯è¦ªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ã—ã¦èªè­˜ã™ã‚‹ã¨è€ƒãˆã¾ã—ãŸã€‚

`test-parser` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã« `.claude/skills/mcp-code-execution` ã‚’é…ç½®ã—ã€æ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆ `src/analyze-parser.ts` ã‚’ä½œæˆã—ã¾ã—ãŸã€‚3 ã¤ã®ã‚¿ã‚¹ã‚¯ã‚’é †æ¬¡å®Ÿè¡Œã™ã‚‹äºˆå®šã§ã—ãŸãŒã€ã¾ãšæœ€åˆã®ã‚¿ã‚¹ã‚¯ï¼ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®å–å¾—ï¼‰ã‚’å®Ÿè£…ã—ã¦å‹•ä½œã‚’ç¢ºèªã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

```
test-parser/                                 â† æœŸå¾…ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ
â”œâ”€â”€ .claude/
â”‚   â””â”€â”€ skills/
â”‚       â””â”€â”€ mcp-code-execution/              â† Skillã‚’é…ç½®
â”‚           â”œâ”€â”€ src/
â”‚           â”‚   â””â”€â”€ analyze-parser.ts        â† æ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚           â”œâ”€â”€ servers/serena/              â† ç”Ÿæˆã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«
â”‚           â””â”€â”€ SKILL.md
â””â”€â”€ parser/                                  â† è§£æå¯¾è±¡
    â””â”€â”€ src/
        â”œâ”€â”€ file1.ts
        â”œâ”€â”€ file2.ts
        â””â”€â”€ ...
```

æ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã¯ã€ç›¸å¯¾ãƒ‘ã‚¹ `'parser'` ã‚’æŒ‡å®šã—ã¦ `listDir` ã‚’å‘¼ã³å‡ºã—ã¾ã—ãŸã€‚æœŸå¾…å‹•ä½œã¨ã—ã¦ã¯ã€`/Users/.../test-parser/parser` ãŒè§£é‡ˆã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚æˆåŠŸã™ã‚Œã°ã€ã‚¿ã‚¹ã‚¯ 2ï¼ˆ`findFile`ï¼‰ã€ã‚¿ã‚¹ã‚¯ 3ï¼ˆ`getSymbolsOverview`ï¼‰ã‚’å®Ÿè£…ã™ã‚‹äºˆå®šã§ã—ãŸã€‚

```typescript
import { listDir } from '../servers/serena/index.js';
import { closeClient } from './client.js';

async function main() {
  try {
    const result = await listDir({
      relative_path: 'parser',
      recursive: true,
    });
    console.log('Parser directory contents:', result);
  } catch (error) {
    if (error instanceof Error) {
      console.error('Error:', error.message);
    }
  } finally {
    await closeClient();
  }
}

main();
```

ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å¾Œã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ãŸã¨ã“ã‚ã€ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã®èª¤èªè­˜

ã‚¿ã‚¹ã‚¯ 1ï¼ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®å–å¾—ï¼‰ã®å®Ÿè¡Œæ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚

```
Error: Directory not found: parser
```

ã“ã®ãŸã‚ã€ã‚¿ã‚¹ã‚¯ 2ï¼ˆTypeScript ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§åŒ–ï¼‰ã¨ã‚¿ã‚¹ã‚¯ 3ï¼ˆã‚·ãƒ³ãƒœãƒ«æƒ…å ±ã®æŠ½å‡ºï¼‰ã¯å®Ÿè¡Œã§ãã¾ã›ã‚“ã§ã—ãŸã€‚Serena ã®ãƒ­ã‚°å‡ºåŠ›ã‚’ç¢ºèªã—ãŸã¨ã“ã‚ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚

```
INFO serena.agent:load_project_from_path_or_name:443 -
Found registered project 'mcp-code-execution' at path
/Users/user/dev/test-parser/.claude/skills/mcp-code-execution
```

Serena ã¯**Skillãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªè‡ªèº«**ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã¨ã—ã¦èªè­˜ã—ã¦ã„ã¾ã—ãŸã€‚ã¤ã¾ã‚Šã€æœŸå¾…ã—ã¦ã„ãŸã®ã¯ `/Users/user/dev/test-parser` ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã¨ã—ã¦èªè­˜ã—ã€ç›¸å¯¾ãƒ‘ã‚¹ `'parser'` ã‚’ `/Users/user/dev/test-parser/parser` ã¨è§£é‡ˆã™ã‚‹ã“ã¨ã§ã—ãŸãŒã€å®Ÿéš›ã«ã¯ `/Users/user/dev/test-parser/.claude/skills/mcp-code-execution` ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã¨ã—ã¦èªè­˜ã—ã€ç›¸å¯¾ãƒ‘ã‚¹ `'parser'` ã‚’ `/Users/user/dev/test-parser/.claude/skills/mcp-code-execution/parser` ã¨è§£é‡ˆã—ã¦ã„ã¾ã—ãŸã€‚å½“ç„¶ã€ã“ã®å ´æ‰€ã«ã¯ parser ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯å­˜åœ¨ã—ã¾ã›ã‚“ã€‚

```
test-parser/
â”œâ”€â”€ .claude/
â”‚   â””â”€â”€ skills/
â”‚       â””â”€â”€ mcp-code-execution/      â† SerenaãŒèªè­˜ã—ãŸãƒ«ãƒ¼ãƒˆ
â”‚           â””â”€â”€ parser/              â† ã“ã“ã‚’æ¢ã—ã¦ã—ã¾ã†ï¼ˆå­˜åœ¨ã—ãªã„ï¼‰
â””â”€â”€ parser/                          â† æœ¬å½“ã¯ã“ã“ã‚’æ¢ã—ãŸã„
```

ã“ã®å•é¡Œã¯ MCP ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•å…ƒã‚’å‹•çš„ã«è¨­å®šã™ã‚‹ã“ã¨ã§è§£æ±ºã§ãã¾ã—ãŸã€‚å…·ä½“çš„ã«ã¯ Serena MCP ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã€ãã®å¾Œã¯ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å¯¾è±¡ã«èª¿æŸ»ã‚’è¡Œã„ã¾ã™ã€‚`~/.claude/skills/` ã§ç™»éŒ²ã—ãŸå ´åˆã¯ç›¸å¯¾ãƒ‘ã‚¹ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆã‚’ç‰¹å®šã§ããªã„ãŸã‚ã€ç’°å¢ƒå¤‰æ•°ã«å®Ÿè¡Œãƒ‘ã‚¹ã®ãƒ•ãƒ«ãƒ‘ã‚¹ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§è§£æ±ºã§ãã¾ã™ã€‚

```ts
import { Client } from '@modelcontextprotocol/sdk/client/index.js';
import { StdioClientTransport } from '@modelcontextprotocol/sdk/client/stdio.js';
import { fileURLToPath } from 'node:url';
import { dirname, resolve } from 'node:path';

let globalClient: Client | null = null;

const projectRoot = (() => {
  // ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã‚Œã°å„ªå…ˆ
  if (process.env.SERENA_PROJECT_ROOT) {
    return process.env.SERENA_PROJECT_ROOT;
  }

  // ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ã‚’ç‰¹å®š
  const __filename = fileURLToPath(import.meta.url);
  const __dirname = dirname(__filename);

  // Project Skillã‹ã©ã†ã‹ã‚’åˆ¤å®š
  // Project Skill: /path/to/project/.claude/skills/mcp-code-execution/src/client.ts
  // Personal Skill: ~/.claude/skills/mcp-code-execution/src/client.ts
  const isProjectSkill = __dirname.includes('/.claude/skills/');

  if (isProjectSkill) {
    // Project Skillã®å ´åˆã¯ ../../../.. ã§è§£æ±º
    // src â†’ mcp-code-execution â†’ skills â†’ .claude â†’ project root
    return resolve(__dirname, '../../../..');
  }

  // Personal Skillã§ç’°å¢ƒå¤‰æ•°æœªè¨­å®šã¯ã‚¨ãƒ©ãƒ¼
  throw new Error(
    'ç’°å¢ƒå¤‰æ•° SERENA_PROJECT_ROOT ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚\n' +
      'Personal Skill (~/.claude/skills/) ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯å¿…é ˆã§ã™ã€‚\n\n' +
      'è¨­å®šæ–¹æ³•:\n' +
      '1. ç’°å¢ƒå¤‰æ•°ã§æŒ‡å®š: export SERENA_PROJECT_ROOT=/path/to/your/project\n' +
      '2. .env ãƒ•ã‚¡ã‚¤ãƒ«ã§æŒ‡å®š: echo "SERENA_PROJECT_ROOT=/path/to/your/project" > .env',
  );
})();

/**
 * Serena MCP ã‚µãƒ¼ãƒã¸ã®æ¥ç¶šã‚’åˆæœŸåŒ–ã€‚
 */
export async function initClient(): Promise<Client> {
  if (globalClient) {
    return globalClient;
  }

  // Serena MCP ã‚µãƒ¼ãƒã®èµ·å‹•è¨­å®š
  const transport = new StdioClientTransport({
    command: 'uvx',
    args: [
      '--from',
      'git+https://github.com/oraios/serena',
      'serena',
      'start-mcp-server',
      '--context',
      'ide-assistant',
      '--project',
      projectRoot,
      '--enable-web-dashboard=false',
    ],
  });

  globalClient = new Client(
    {
      name: 'mcp-code-executor',
      version: '0.1.0',
    },
    {
      capabilities: {},
    },
  );

  await globalClient.connect(transport);

  return globalClient;
}
```


## Claude Codeã®å‹å®šç¾©èªè­˜ã®èª²é¡Œ

ä»Šå›ã®æ¤œè¨¼ã§ã¯ã€SKILL.md ã¨ TOOLS.md ã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚Claude Code ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å¾“ã£ã¦ã€SKILLS è‡ªä½“ã®å½¹å‰²ã¨ã€é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†é›¢ã—ã¦ã„ã¾ã™ã€‚ï¼ˆè©³ç´°ã¯ä»˜éŒ² Aã€ä»˜éŒ² B ã‚’å‚ç…§ï¼‰

æ¤œè¨¼ç”¨ã¨ã—ã¦ä¸€éƒ¨ã® Tools ã§ã¯æ˜ç¢ºã«å‹å®šç¾©ã‚‚è¡Œã£ã¦ã„ã¾ã—ãŸã€‚

```ts
import { callMCPTool } from '../../src/client.js';
import type { SymbolKind, SymbolLocation } from './types.js';

type FindSymbolInput = {
  name_path: string;
  depth?: number;
  relative_path?: string;
  include_body?: boolean;
  include_kinds?: SymbolKind[];
  exclude_kinds?: SymbolKind[];
  substring_matching?: boolean;
  max_answer_chars?: number;
};

/**
 * findSymbolãƒ„ãƒ¼ãƒ«ã®æˆ»ã‚Šå€¤ã«å«ã¾ã‚Œã‚‹ã‚·ãƒ³ãƒœãƒ«æƒ…å ±
 */
export type FindSymbolResultItem = {
  name_path: string;
  kind: SymbolKind;
  body_location: SymbolLocation;
  relative_path: string;
};

/**
 * findSymbolãƒ„ãƒ¼ãƒ«ã®æˆ»ã‚Šå€¤å‹
 */
export type FindSymbolResult = FindSymbolResultItem[];

export async function findSymbol(
  input: FindSymbolInput,
): Promise<FindSymbolResult> {
  return await callMCPTool('find_symbol', input);
}
```

### å‹å®šç¾©ã®èª¤èªè­˜

`findSymbol` ãƒ„ãƒ¼ãƒ«ã§ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ `name_path` ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚å‹å®šç¾©ã‚‚åŒæ§˜ã«è¡Œã£ã¦ã„ã¾ã—ãŸãŒã€æ¯å› `name` ã¨ã—ã¦è¨­å®šã—ã¦ã—ã¾ã„ã¾ã™ã€‚

```ts
// findSymbolã§ã‚·ãƒ³ãƒœãƒ«ã®å®Ÿè£…ã‚’å–å¾—
const symbolDetail = await findSymbol({
  name: 'functionName', // å‹ã‚¨ãƒ©ãƒ¼
  relative_path: file,
  include_body: true
});
```

SKILL.md ã«å‹å®šç¾©ã‚’å‚ç…§ã™ã‚‹ã“ã¨ã‚’æ˜è¨˜ã—ã¦ã„ã¾ã™ãŒã€ãã‚Œã§ã‚‚è§£æ±ºã—ãªã‹ã£ãŸã®ã§ã€æ¯å›å‹ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã‚‹â†’ä¿®æ­£ã™ã‚‹â†’å‹•ãã¨ã„ã£ãŸå½¢ã§å¾€å¾©ãŒç™ºç”Ÿã—ã¦ãŠã‚ŠåŠ¹ç‡ãŒæ‚ªã„ã§ã™ã€‚ã“ã®ã‚ãŸã‚Šã¯ä»–ã® SKILLS ã§ã‚‚åŒæ§˜ã«ç™ºç”Ÿã™ã‚‹å•é¡Œãªã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

### å­˜åœ¨ã—ãªã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æé€ 

å‹å®šç¾©ã—ã¦ã„ã‚‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ç‹¬è‡ªã® `as` ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¦ã„ã¾ã—ãŸã€‚å½“ç„¶ã®ã”ã¨ãå‹•ä½œã—ã¾ã›ã‚“ã€‚`isExported` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã®ã©ã“ã«ã‚‚å­˜åœ¨ã—ãªã„ã®ã§ã€æœ¬å½“ã«ã©ã“ã‹ã‚‰å‡ºã¦ããŸã®ã‹ä¸æ˜ã§ã™ã€‚

```ts
// ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ã‚·ãƒ³ãƒœãƒ«ä¸€è¦§ã‚’å–å¾—
const symbols = await getSymbolsOverview({
  relative_path: file
}) as Array<{
  name: string;
  kind: number;
  isExported: boolean;
  startLine: number;
  endLine: number;
}>;

// æœ¬æ¥ã¯ä»¥ä¸‹ã®å‹å®šç¾©ãŒæ­£ã—ã„ã®ã«ä½•æ•…ã‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦ãã‚‹
// export type SymbolInfo = {
//   name_path: string;
//   kind: SymbolKind;
//   body_location: SymbolLocation;
//   relative_path: string;
// };
// export type GetSymbolsOverviewResult = SymbolInfo[];
```

## å•é¡Œã®åŸå› 

### ãƒ„ãƒ¼ãƒ«æ•°ã®å¤šã•ã¨å‹å®šç¾©ã®è¤‡é›‘ã•

Serena MCP ã¯ 20 å€‹ã®ãƒ„ãƒ¼ãƒ«ã‚’æŒã¡ã€ãã‚Œãã‚Œã«è¤‡é›‘ãªå‹å®šç¾©ãŒã‚ã‚Šã¾ã™ã€‚TOOLS.md ã§ä»•æ§˜ã‚’èª¬æ˜ã—ã€å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ç”¨æ„ã—ã¦ã„ã¾ã—ãŸãŒã€Claude Code ã¯ä»¥ä¸‹ã®ãƒŸã‚¹ã‚’ç¹°ã‚Šè¿”ã—ã¾ã—ãŸã€‚

- ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã®èª¤ã‚Šï¼ˆ`name` â†’ æ­£ã—ãã¯ `name_path`ï¼‰
- ç‹¬è‡ªã®å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ`isExported` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æé€ ï¼‰

å‹å®šç¾©ã‚’æä¾›ã—ã¦ã‚‚ã€Claude Code ãŒãã‚Œã‚’æ­£ç¢ºã«å‚ç…§ã™ã‚‹ä¿è¨¼ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚çµæœã¨ã—ã¦ã€ã‚¨ãƒ©ãƒ¼ä¿®æ­£ã®å¾€å¾©ãŒç™ºç”Ÿã—ã€ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ãŒå¢—åŠ ã—ã¾ã—ãŸã€‚ã€Œã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå¾Œã«å‹ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã€ã¨æ˜è¨˜ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ãŒã€ã‚³ãƒ¼ãƒ‰ç”Ÿæˆâ†’å‹ãƒã‚§ãƒƒã‚¯â†’ã‚¨ãƒ©ãƒ¼ã¨ã„ã†æµã‚Œã«ãªã‚‹ã¨ã€ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»é‡ãŒå¤šããªã‚‹ãŸã‚æ ¹æœ¬çš„ãªè§£æ±ºã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚

### Serenaç‹¬è‡ªã®è¨­è¨ˆæ€æƒ³

ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ãŒä¸€èˆ¬çš„ãª `readFile` ã§ã¯ãªãã€`searchForPattern` ã‚„ `findSymbol` ã¨ã„ã† Serena ç‹¬è‡ªã®è¨­è¨ˆã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ãƒˆãƒ¼ã‚¯ãƒ³åŠ¹ç‡ã‚’é‡è¦–ã—ãŸè¨­è¨ˆã§ã™ãŒã€Claude Code ã¯ä¸€èˆ¬çš„ãª API ã‚’å‰æã«ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã€ãƒŸã‚¹ãƒãƒƒãƒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚Serena MCP ã¯ã€Œãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã‚’èª­ã¿è¾¼ã¾ãªã„ã€ã¨ã„ã†è¨­è¨ˆæ–¹é‡ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã®è¨­è¨ˆã¯ã€LLM ãŒç›´æ¥ãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã™å ´åˆã«ã¯æœ‰åŠ¹ã§ã™ãŒã€LLM ãŒã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹å ´åˆã«ã¯èªçŸ¥çš„ãªè² è·ãŒé«˜ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

## è€ƒå¯Ÿ

### ã‚·ãƒ³ãƒ—ãƒ«ãªMCPã§ã¯æˆåŠŸç‡ãŒä¸ŠãŒã‚‹å¯èƒ½æ€§

Context7 MCP ã¯ 2 ã¤ã®ãƒ„ãƒ¼ãƒ«ã®ã¿ã§ã€å‹å®šç¾©ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã§ã™ï¼ˆ`resolve-library-id` ã¨ `get-library-docs`ï¼‰ã€‚ãƒ„ãƒ¼ãƒ«æ•°ãŒå°‘ãªãã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªãŸã‚ã€EXAMPLES.md ã«æ²è¼‰ã™ã‚‹ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ä¾‹ã‚’æ˜ç¢ºã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚çµæœã¨ã—ã¦ã€Claude Code ãŒå‹ã‚¨ãƒ©ãƒ¼ã‚’èµ·ã“ã™å¯èƒ½æ€§ãŒä½ããªã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

### æ¤œè¨¼ã§ããªã‹ã£ãŸã“ã¨

å½“åˆã®ç›®çš„ã¯ã€Serena MCP ç›´æ¥å‘¼ã³å‡ºã—ã¨æ¯”è¼ƒã—ã¦ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ¶ˆè²»é‡ã®å‰Šæ¸›ç‡ã‚’ç¢ºèªã—ã€ä¸­é–“ãƒ‡ãƒ¼ã‚¿ãŒ LLM ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å«ã¾ã‚Œãšã€æœ€çµ‚çµæœã®ã¿ãŒè¿”ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã§ã—ãŸã€‚ã—ã‹ã—ã€å®Ÿç”¨ã«è¶³ã‚Šã‚‹ã‚‚ã®ã§ã¯ãªã‹ã£ãŸãŸã‚ã€æ¤œè¨¼ã‚’ä¸­æ­¢ã—ã¾ã—ãŸã€‚ã“ã®çŠ¶æ…‹ã§ã€Œãƒˆãƒ¼ã‚¯ãƒ³å‰Šæ¸›åŠ¹æœã€ã‚’è¨ˆæ¸¬ã—ã¦ã‚‚ã€Skill ã®å•é¡Œãªã®ã‹ã€Serena MCP ã®è¤‡é›‘ã•ã®å•é¡Œãªã®ã‹ãŒåˆ‡ã‚Šåˆ†ã‘ã‚‰ã‚Œã¾ã›ã‚“ã€‚å‹å®šç¾©ãŒã‚·ãƒ³ãƒ—ãƒ«ãª MCP ã§å†æ¤œè¨¼ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨æ„Ÿã˜ã¾ã—ãŸã€‚

### æ”¹å–„æ¡ˆ

ä»Šå¾Œåˆ¥ã§å®Ÿæ–½ã™ã‚‹ã¨ã—ãŸã‚‰ä»¥ä¸‹ã®æ‰‹é †ã§å®Ÿæ–½ã—ã¾ã™ã€‚

1 ã¤ç›®ã¯ã‚·ãƒ³ãƒ—ãƒ«ãª MCP ã§ã®å†æ¤œè¨¼ã‚’è¡Œã„ã¾ã™ã€‚Context7 MCP ã®ã‚ˆã†ãªã€ãƒ„ãƒ¼ãƒ«æ•°ãŒå°‘ãªãï¼ˆ2-3 å€‹ç¨‹åº¦ï¼‰ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒã‚·ãƒ³ãƒ—ãƒ«ã§ï¼ˆå¿…é ˆ 1-2 å€‹ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ 1-2 å€‹ï¼‰ã€è¿”å´å€¤ã®å‹ãŒæ˜ç¢ºãª MCP ã§æ¤œè¨¼ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€Skill è‡ªä½“ã®æœ‰åŠ¹æ€§ã‚’åˆ‡ã‚Šåˆ†ã‘ã¦è©•ä¾¡ã§ãã¾ã™ã€‚

2 ã¤ç›®ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’äº‹å‰ã«é…ç½®ã—ã¾ã™ã€‚`src/template.ts` ã‚’ç”¨æ„ã—ã€Claude Code ã®æ“ä½œãŒã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚‹ã‹ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

3 ã¤ç›®ã¯ EXAMPLES.md ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚ˆã‚Šå…·ä½“çš„ã«æ›¸ãã¾ã™ã€‚Serena MCP ã§ã¯ãƒ„ãƒ¼ãƒ«ãŒå¤šã Claude Code ãŒå®Ÿéš›ã«å‡ºåŠ›ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã«ã‚‚ã°ã‚‰ã¤ããŒã‚ã‚Šã¾ã—ãŸã€‚å®Ÿéš›ã«å‹•ä½œã™ã‚‹ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ EXAMPLES.md ã«æ²è¼‰ã—ã€Claude Code ãŒå‚ç…§ã—ã‚„ã™ãã™ã‚‹ã“ã¨ã§å‹ã‚¨ãƒ©ãƒ¼ãŒæ¸›ã‚‹ã‹æ¤œè¨¼ã—ã¾ã™ã€‚

## ãŠã‚ã‚Šã«

Claude Code è‡ªä½“ã« TODO ã‚’ä½œæˆã•ã›ã€ç¢ºèªãŒçµ‚ã‚ã£ã¦ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ç”Ÿæˆâ†’ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã™ã‚‹æ–¹æ³•ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ãŒã€ãã‚Œã§ã¯æ—¢å­˜ã®ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã»ã†ãŒé€Ÿãã‚¹ãƒˆãƒ¬ã‚¹ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚ç†æƒ³ã¯å¯¾è±¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ 1 å›ã§å…¨éƒ¨ Tool èª­ã¿è¾¼ã¿ã—æœ€å°ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆé‡ã§é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†æã‚’è¡Œã†ã“ã¨ã§ã—ãŸãŒã€ä½•å›ã‚‚å®Ÿè¡Œã™ã‚‹å‰æã® MCP ã«ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯é©åˆ‡ã§ã¯ãªã‹ã£ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

MCP ã‚µãƒ¼ãƒãƒ¼ã®ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œã‚’ã™ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®æ¡ä»¶ã‚’æº€ãŸã—ãŸ MCP ãŒé©åˆ‡ã ã¨è€ƒãˆã¾ã™ã€‚

- ãƒ„ãƒ¼ãƒ«æ•°ãŒ 5 å€‹ä»¥ä¸‹
- å‹å®šç¾©ãŒãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ä¸­å¿ƒï¼ˆstring, number, booleanï¼‰
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå¿…é ˆ 1-2 å€‹ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³ 0-2 å€‹
- è¿”å´å€¤ãŒé…åˆ—ã‚„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ãªãå˜ä¸€ã®å€¤
- è¨­è¨ˆæ€æƒ³ãŒä¸€èˆ¬çš„ãª API ã®å‘½åè¦å‰‡ã«æ²¿ã£ã¦ã„ã‚‹

å¯¾è±¡ã«ã—ãŸ Serena MCP ã¯ã“ã‚Œã‚‰ã®æ¡ä»¶ã‚’æº€ãŸã—ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚è¨˜äº‹ã«ã‚ã‚‹é€šã‚Šã€Google Drive ã®ã‚ˆã†ã«è¿”å´ã•ã‚Œã‚‹ã‚‚ã®ãŒã¯ã£ãã‚Šã—ã¦ã„ã‚‹ MCP ã§å®Ÿæ–½ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

---

## ä»˜éŒ²Aã€SKILL.md

````md SKILL.md
---
name: mcp-code-execution
description: MCP ãƒ„ãƒ¼ãƒ«ã‚’ TypeScript ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦å®Ÿè¡Œã—ã€ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ã‚’æœ€å¤§ 98.7% å‰Šæ¸›ã—ã¾ã™ã€‚Serena MCP ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ãŒå¿…è¦ãªå ´åˆã€å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå‡¦ç†ã€ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹å…¨ä½“ã¸ã®æ“ä½œã€ãƒãƒƒãƒå‡¦ç†ã€ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã«é…æ…®ã—ãŸãƒ‡ãƒ¼ã‚¿å‡¦ç†ãŒå¿…è¦ãªå ´åˆã«ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
allowed-tools: Read, Write, Bash, Glob, Grep
---

## MCP ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ

## æ¦‚è¦

MCP ãƒ„ãƒ¼ãƒ«ã‚’ TypeScript ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦å®Ÿè¡Œã—ã€ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ã‚’åŠ‡çš„ã«å‰Šæ¸›ã—ã¾ã™ã€‚å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ã¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€ã‚³ãƒ¼ãƒ‰å†…ã§ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã¦ã‹ã‚‰ã€æœ€çµ‚çµæœã®ã¿ã‚’è¿”ã—ã¾ã™ã€‚

**ãƒˆãƒ¼ã‚¯ãƒ³å‰Šæ¸›**: ãƒãƒ«ãƒãƒ„ãƒ¼ãƒ«ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§æœ€å¤§ **98.7%**ï¼ˆ150,000 ãƒˆãƒ¼ã‚¯ãƒ³ â†’ 2,000 ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰

## ã„ã¤ã“ã®ã‚¹ã‚­ãƒ«ã‚’ä½¿ã†ã‹

ä»¥ä¸‹ã®æ¡ä»¶ã®ã„ãšã‚Œã‹ã«è©²å½“ã™ã‚‹å ´åˆã€ã“ã®ã‚¹ã‚­ãƒ«ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ï¼š

### ä½¿ç”¨ã™ã¹ãå ´åˆ
- âœ“ **Serena MCP ãƒ„ãƒ¼ãƒ«**ã‚’é€£ç¶šä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- âœ“ **100å€‹ä»¥ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«**ã‚’å‡¦ç†ã™ã‚‹
- âœ“ **å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**ï¼ˆçµæœã‚’çµã‚Šè¾¼ã‚“ã§ã‹ã‚‰å ±å‘Šï¼‰
- âœ“ **ãƒãƒƒãƒæ“ä½œ**ï¼ˆè¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ«ãƒ¼ãƒ—å‡¦ç†ï¼‰
- âœ“ **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·**ï¼ˆæ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã‚’ LLM ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å…¥ã‚Œãªã„ï¼‰

### ä½¿ç”¨ã™ã¹ãã§ãªã„å ´åˆ
- âœ— 1-2å€‹ã®ãƒ„ãƒ¼ãƒ«ã‚’1å›ã ã‘ä½¿ã†å˜ç´”ãªã‚¿ã‚¹ã‚¯
- âœ— ã©ã®ãƒ„ãƒ¼ãƒ«ãŒå¿…è¦ã‹ã¾ã åˆ†ã‹ã‚‰ãªã„æ¢ç´¢çš„ä½œæ¥­
- âœ— ä¸­é–“çµæœã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚‹å¯¾è©±çš„ãƒ‡ãƒãƒƒã‚°

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã®è¨­å®š

ã“ã®ã‚¹ã‚­ãƒ«ã®é…ç½®å ´æ‰€ã«ã‚ˆã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã®è¨­å®šæ–¹æ³•ãŒç•°ãªã‚Šã¾ã™ã€‚

#### Project Skillsï¼ˆ`.claude/skills/` ã«é…ç½®ï¼‰ã®å ´åˆ

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã¯è‡ªå‹•æ¤œå‡ºã•ã‚Œã¾ã™**ã€‚ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã¯ä¸è¦ã§ã™ã€‚

```bash
## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ã‚¹ã‚­ãƒ«
## .claude/skills/mcp-code-execution ã‹ã‚‰è‡ªå‹•çš„ã« ../../../../ ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‚’æ¤œå‡º
bun run src/your-script.ts
```

#### Personal Skillsï¼ˆ`~/.claude/skills/` ã«é…ç½®ï¼‰ã®å ´åˆ

**ç’°å¢ƒå¤‰æ•° `SERENA_PROJECT_ROOT` ãŒå¿…é ˆ**ã§ã™ã€‚æœªè¨­å®šã®å ´åˆã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚

**æ–¹æ³•1: ç’°å¢ƒå¤‰æ•°ã§æŒ‡å®š**
```bash
export SERENA_PROJECT_ROOT=/path/to/your/project
bun run src/your-script.ts
```

**æ–¹æ³•2: .env ãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†**ï¼ˆæ¨å¥¨ï¼‰
```env
SERENA_PROJECT_ROOT=/path/to/your/project
```

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã™ã‚Œã°ã€Bun ãŒè‡ªå‹•çš„ã«èª­ã¿è¾¼ã¿ã¾ã™ã€‚

**ç•°ãªã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®ä½¿ç”¨ä¾‹**:
```bash
## test-parser ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
SERENA_PROJECT_ROOT=/Users/user/dev/test-parser bun run src/analyze-parser.ts

## testA ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
SERENA_PROJECT_ROOT=/Users/user/dev/testA bun run src/analyze-testA.ts
```

## ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆClaude ãŒå¾“ã†ã¹ãæ‰‹é †ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—1: ã‚¿ã‚¹ã‚¯ã®è©•ä¾¡

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚¹ã‚¯ãŒä¸Šè¨˜ã®ã€Œä½¿ç”¨ã™ã¹ãå ´åˆã€ã«è©²å½“ã™ã‚‹ã‹åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚è©²å½“ã™ã‚‹å ´åˆã®ã¿ã€ã“ã®ã‚¹ã‚­ãƒ«ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ„ãƒ¼ãƒ«ä»•æ§˜ã®ç¢ºèªï¼ˆå¿…é ˆãƒ»ã‚¹ã‚­ãƒƒãƒ—ä¸å¯ï¼‰

ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’çœç•¥ã™ã‚‹ã¨100%å¤±æ•—ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¿…ãšReadãƒ„ãƒ¼ãƒ«ã§èª­ã‚“ã§ãã ã•ã„ï¼š

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ:**
- [ ] TOOLS.mdã‚’èª­ã‚“ã ï¼ˆReadãƒ„ãƒ¼ãƒ«ä½¿ç”¨ï¼‰
- [ ] ä½¿ç”¨ã™ã‚‹å„ãƒ„ãƒ¼ãƒ«ã®å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ« `servers/serena/[ãƒ„ãƒ¼ãƒ«å].ts` ã‚’èª­ã‚“ã ï¼ˆReadãƒ„ãƒ¼ãƒ«ä½¿ç”¨ï¼‰
- [ ] ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åãŒå‹å®šç¾©ã¨å®Œå…¨ã«ä¸€è‡´ã—ã¦ã„ã‚‹
- [ ] æˆ»ã‚Šå€¤ã®å‹ãŒå‹å®šç¾©ã¨å®Œå…¨ã«ä¸€è‡´ã—ã¦ã„ã‚‹
- [ ] å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ`as`ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„ï¼ˆå‹å®šç¾©ã‹ã‚‰è‡ªå‹•æ¨è«–ã•ã‚Œã‚‹ï¼‰

ä¸Šè¨˜ã™ã¹ã¦ã«ãƒã‚§ãƒƒã‚¯ãŒå…¥ã‚‹ã¾ã§ã‚¹ãƒ†ãƒƒãƒ—3ã«é€²ã¾ãªã„ã§ãã ã•ã„ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—3: TypeScript ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ç”Ÿæˆ

`src/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é©åˆ‡ãªåå‰ã® TypeScript ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š

```typescript
import { /* å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ã¿ */ } from '../servers/serena/index.js';
import { closeClient } from './client.js';

async function main() {
  try {
    // ã“ã“ã«ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…
    // - å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ã¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
    // - ã‚³ãƒ¼ãƒ‰å†…ã§ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    // - æœ€çµ‚çµæœã®ã¿ console.log()

  } catch (error) {
    if (error instanceof Error) {
      console.error('ã‚¨ãƒ©ãƒ¼:', error.message);
    }
  } finally {
    await closeClient();  // å¿…é ˆ
  }
}

main();
```

**é‡è¦**:
- å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ã¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆå…¨20ãƒ„ãƒ¼ãƒ«ã§ã¯ãªãï¼‰
- **TOOLS.mdã§ç¢ºèªã—ãŸæ­£ç¢ºãªå‹å®šç¾©ã‚’ä½¿ç”¨**
- ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã¯ã‚³ãƒ¼ãƒ‰å†…ã§å®Ÿæ–½ï¼ˆfilterã€mapã€reduceï¼‰
- æœ€çµ‚çµæœã®ã¿ã‚’ `console.log()` ã§å‡ºåŠ›
- å¿…ãš `await closeClient()` ã‚’å‘¼ã³å‡ºã™

### ã‚¹ãƒ†ãƒƒãƒ—4: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œ

```bash
bun run src/your-script.ts
```

### ã‚¹ãƒ†ãƒƒãƒ—5: çµæœã®å ±å‘Š

ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å‡ºåŠ›ã‹ã‚‰æœ€çµ‚çµæœã®ã¿ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å ±å‘Šã—ã¦ãã ã•ã„ã€‚ä¸­é–“ãƒ‡ãƒ¼ã‚¿ã‚„å‡¦ç†ã®è©³ç´°ã¯å ±å‘Šã—ãªã„ã§ãã ã•ã„ï¼ˆãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·ã®ãŸã‚ï¼‰ã€‚

**ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆ**:
- å‹ã‚¨ãƒ©ãƒ¼: TOOLS.mdã¨å‹å®šç¾©ã‚’å†ç¢ºèª
- å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å½¢å¼ã¨ãƒ„ãƒ¼ãƒ«ã®å­˜åœ¨ã‚’ç¢ºèª

## åˆ©ç”¨å¯èƒ½ãªãƒ„ãƒ¼ãƒ«

å…¨20ã® Serena MCP ãƒ„ãƒ¼ãƒ«ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚è©³ç´°ã¯ [TOOLS.md](TOOLS.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

**ä¸»è¦ãªãƒ„ãƒ¼ãƒ«**:
- `listDir`, `findFile`, `searchForPattern` - ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ
- `getSymbolsOverview`, `findSymbol` - ã‚³ãƒ¼ãƒ‰è§£æ
- `replaceSymbolBody`, `renameSymbol` - ã‚³ãƒ¼ãƒ‰ç·¨é›†

ã‚¤ãƒ³ãƒãƒ¼ãƒˆä¾‹ï¼š
```typescript
import { listDir, findFile, getSymbolsOverview } from '../servers/serena/index.js';
```

## åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹

### ä¾‹: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ã‚’æŒã¤ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢

```typescript
import { listDir, getSymbolsOverview } from '../servers/serena/index.js';
import { closeClient } from './client.js';

async function main() {
  try {
    const result = await listDir({ relative_path: 'src', recursive: true });
    const tsFiles = result.files.filter(f => f.endsWith('.ts'));

    const filesWithClasses = [];
    for (const file of tsFiles) {
      const symbols = await getSymbolsOverview({ relative_path: file });
      if (symbols.some(s => s.kind === 5)) {  // kind 5 = ã‚¯ãƒ©ã‚¹
        filesWithClasses.push(file);
      }
    }

    console.log(`ã‚¯ãƒ©ã‚¹ã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«: ${filesWithClasses.join(', ')}`);
  } catch (error) {
    if (error instanceof Error) {
      console.error('ã‚¨ãƒ©ãƒ¼:', error.message);
    }
  } finally {
    await closeClient();
  }
}

main();
```

**åŠ¹æœ**: 1000ãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç†ã§ã‚‚ã€æœ€çµ‚çµæœã®ã¿ãŒ LLM ã«åˆ°é”ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³å‰Šæ¸›: 99%ä»¥ä¸Šï¼‰

ã•ã‚‰ã«è©³ã—ã„ä¾‹ã¯ [EXAMPLES.md](EXAMPLES.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## å¿…é ˆäº‹é …

### 1. closeClient() ã‚’å¿…ãšå‘¼ã³å‡ºã™

```typescript
finally {
  await closeClient();  // ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æœ€å¾Œã«å¿…ãš
}
```

### 2. .js æ‹¡å¼µå­ã‚’ä½¿ç”¨

```typescript
import { listDir } from '../servers/serena/index.js';  // âœ“ æ­£ã—ã„
import { listDir } from '../servers/serena/index';     // âœ— é–“é•ã„
```

### 3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```typescript
try {
  // ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—
} catch (error) {
  console.error('ã‚¨ãƒ©ãƒ¼:', error.message);
} finally {
  await closeClient();
}
```

## ä¸»ãªåˆ©ç‚¹

| åˆ©ç‚¹ | èª¬æ˜ |
|------|------|
| **ãƒˆãƒ¼ã‚¯ãƒ³å‰Šæ¸›** | æœ€å¤§ 98.7% ã®ãƒˆãƒ¼ã‚¯ãƒ³å‰Šæ¸› |
| **ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰ãƒ­ãƒ¼ãƒ‰** | å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ã¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ |
| **ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°** | LLM ãŒè¦‹ã‚‹å‰ã«å‡¦ç† |
| **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·** | æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ãŒã‚³ãƒ¼ãƒ‰å†…ã«ç•™ã¾ã‚‹ |

## ã•ã‚‰ã«è©³ã—ã„æƒ…å ±

- **å…¨ãƒ„ãƒ¼ãƒ«ãƒªã‚¹ãƒˆ**: [TOOLS.md](TOOLS.md)
- **è©³ç´°ãªä½¿ç”¨ä¾‹**: [EXAMPLES.md](EXAMPLES.md)
- **æŠ€è¡“è©³ç´°**: [REFERENCE.md](REFERENCE.md)

## å‚è€ƒ

ã“ã®ã‚¹ã‚­ãƒ«ã¯ Anthropic ã®æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«åŸºã¥ã„ã¦ã„ã¾ã™:
[Code execution with MCP: building more efficient AI agents](https://www.anthropic.com/engineering/code-execution-with-mcp)
````

## ä»˜éŒ²Bã€TOOLS.md

````md TOOLS.md
## åˆ©ç”¨å¯èƒ½ãªãƒ„ãƒ¼ãƒ«

è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ TypeScript ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’é€šã˜ã¦ã€å…¨ 20 ã® Serena MCP ãƒ„ãƒ¼ãƒ«ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚

ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«ã¯ `servers/serena/index.ts` ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ãã¾ã™ï¼š

```typescript
import { listDir, findFile, getSymbolsOverview } from '../servers/serena/index.js';
```

## ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ

### `listDir(input)`
ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸€è¦§ã‚’å–å¾—ã—ã¾ã™ã€‚

**å…¥åŠ›ä¾‹:**
```typescript
await listDir({
  relative_path: 'src',
  recursive: true
});
```

### `findFile(input)`
ãƒ‘ã‚¿ãƒ¼ãƒ³/ãƒã‚¹ã‚¯ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢ã—ã¾ã™ã€‚

**å…¥åŠ›ä¾‹:**
```typescript
await findFile({
  file_mask: '*.ts',
  relative_path: 'src'
});
```

### `searchForPattern(input)`
ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œç´¢ã—ã¾ã™ã€‚

**å…¥åŠ›ä¾‹:**
```typescript
await searchForPattern({
  substring_pattern: 'export.*function',
  relative_path: 'src/index.ts'
});
```

## ã‚·ãƒ³ãƒœãƒ«æ“ä½œ

### `getSymbolsOverview(input)`
ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã‚·ãƒ³ãƒœãƒ«ã‚’å–å¾—ã—ã¾ã™ã€‚

**ç”¨é€”:** ãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹é€ ã‚’ç†è§£ã™ã‚‹ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸé–¢æ•°/ã‚¯ãƒ©ã‚¹ã‚’æ¤œç´¢

**å…¥åŠ›ä¾‹:**
```typescript
await getSymbolsOverview({
  relative_path: 'src/index.ts'
});
```

### `findSymbol(input)`
ã‚·ãƒ³ãƒœãƒ«ã‚’æ¤œç´¢ã—ã¦æœ¬ä½“ã‚’å«ã‚€è©³ç´°ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚

**ç”¨é€”:** ç‰¹å®šã®é–¢æ•°ã‚„ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ã‚’å–å¾—

**å…¥åŠ›ä¾‹:**
```typescript
await findSymbol({
  name_path: 'myFunction',
  relative_path: 'src/utils.ts'
});
```

### `findReferencingSymbols(input)`
ã‚·ãƒ³ãƒœãƒ«ã¸ã®ã™ã¹ã¦ã®å‚ç…§ã‚’æ¤œç´¢ã—ã¾ã™ã€‚

**ç”¨é€”:** ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å‰ã«å½±éŸ¿ç¯„å›²ã‚’ç¢ºèª

**å…¥åŠ›ä¾‹:**
```typescript
await findReferencingSymbols({
  name_path: 'oldName',
  relative_path: 'src/main.ts'
});
```

## ã‚³ãƒ¼ãƒ‰ç·¨é›†

### `replaceSymbolBody(input)`
ã‚·ãƒ³ãƒœãƒ«ã®å®Ÿè£…ã‚’ç½®æ›ã—ã¾ã™ã€‚

**ç”¨é€”:** é–¢æ•°ã‚„ãƒ¡ã‚½ãƒƒãƒ‰ã®æœ¬ä½“ã‚’æ›¸ãæ›ãˆ

**å…¥åŠ›ä¾‹:**
```typescript
await replaceSymbolBody({
  name_path: 'myFunction',
  relative_path: 'src/utils.ts',
  body: 'return "new implementation";'
});
```

### `insertAfterSymbol(input)`
ã‚·ãƒ³ãƒœãƒ«ã®å¾Œã«ã‚³ãƒ¼ãƒ‰ã‚’æŒ¿å…¥ã—ã¾ã™ã€‚

**ç”¨é€”:** æ–°ã—ã„ãƒ¡ã‚½ãƒƒãƒ‰ã‚„é–¢æ•°ã‚’æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®å¾Œã«è¿½åŠ 

**å…¥åŠ›ä¾‹:**
```typescript
await insertAfterSymbol({
  name_path: 'existingFunction',
  relative_path: 'src/utils.ts',
  body: 'function newFunction() { ... }'
});
```

### `insertBeforeSymbol(input)`
ã‚·ãƒ³ãƒœãƒ«ã®å‰ã«ã‚³ãƒ¼ãƒ‰ã‚’æŒ¿å…¥ã—ã¾ã™ã€‚

**ç”¨é€”:** ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ã®è¿½åŠ ã€å‰ç½®ãé–¢æ•°ã®è¿½åŠ 

**å…¥åŠ›ä¾‹:**
```typescript
await insertBeforeSymbol({
  name_path: 'mainFunction',
  relative_path: 'src/index.ts',
  body: 'import { helper } from "./helper";'
});
```

### `renameSymbol(input)`
ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹å…¨ä½“ã§ã‚·ãƒ³ãƒœãƒ«ã®åå‰ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

**ç”¨é€”:** ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã€å¤‰æ•°ãƒ»é–¢æ•°åã®çµ±ä¸€

**å…¥åŠ›ä¾‹:**
```typescript
await renameSymbol({
  name_path: 'oldName',
  relative_path: 'src/main.ts',
  new_name: 'newName'
});
```

## ãƒ¡ãƒ¢ãƒªæ“ä½œ

### `writeMemory(input)`
å¾Œã§ä½¿ã†æƒ…å ±ã‚’ä¿å­˜ã—ã¾ã™ã€‚

**ç”¨é€”:** ã‚»ãƒƒã‚·ãƒ§ãƒ³é–“ã§æƒ…å ±ã‚’ä¿æŒã€å­¦ç¿’å†…å®¹ã®è“„ç©

**å…¥åŠ›ä¾‹:**
```typescript
await writeMemory({
  memory_file_name: 'project-structure',
  content: '{ "src": "source files", "tests": "test files" }'
});
```

### `readMemory(input)`
ä»¥å‰ä¿å­˜ã—ãŸæƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚

**å…¥åŠ›ä¾‹:**
```typescript
await readMemory({
  memory_file_name: 'project-structure'
});
```

### `listMemories(input)`
ä¿å­˜ã•ã‚ŒãŸã™ã¹ã¦ã®ãƒ¡ãƒ¢ãƒªã‚’ä¸€è¦§ã—ã¾ã™ã€‚

**ç”¨é€”:** ä¿å­˜ã•ã‚ŒãŸæƒ…å ±ã®ç¢ºèª

**å…¥åŠ›ä¾‹:**
```typescript
await listMemories({});
```

### `deleteMemory(input)`
ãƒ¡ãƒ¢ãƒªã‚’å‰Šé™¤ã—ã¾ã™ã€‚

**å…¥åŠ›ä¾‹:**
```typescript
await deleteMemory({
  memory_file_name: 'obsolete-key'
});
```

## ãƒ¡ã‚¿ãƒ„ãƒ¼ãƒ«

### `initialInstructions(input)`
Serena ã®ä½¿ç”¨æ–¹æ³•ã‚’å–å¾—ã—ã¾ã™ã€‚

**ç”¨é€”:** Serena MCP ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã‚’ç¢ºèª

### `checkOnboardingPerformed(input)`
ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚

### `onboarding(input)`
Serena ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

### `thinkAboutCollectedInformation(input)`
åé›†ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æŒ¯ã‚Šè¿”ã‚Šã¾ã™ã€‚

**ç”¨é€”:** ã‚¿ã‚¹ã‚¯å®Œäº†å‰ã®æƒ…å ±æ•´ç†

### `thinkAboutTaskAdherence(input)`
ã‚¿ã‚¹ã‚¯ã®æ•´åˆæ€§ã‚’ç¢ºèªã—ã¾ã™ã€‚

**ç”¨é€”:** å…ƒã®ã‚¿ã‚¹ã‚¯è¦ä»¶ã¨ã®ä¸€è‡´ã‚’æ¤œè¨¼

### `thinkAboutWhetherYouAreDone(input)`
å®Œäº†ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã¾ã™ã€‚

**ç”¨é€”:** ã‚¿ã‚¹ã‚¯å®Œäº†ã®åˆ¤æ–­

## å‹å®šç¾©

ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«ã«ã¯ MCP ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ TypeScript å‹ãŒã‚ã‚Šã¾ã™ã€‚

è©³ç´°ãªå‹å®šç¾©ã¯ `servers/serena/*.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

**ä¾‹:**
```typescript
type ListDirInput = {
  relative_path: string;
  recursive: boolean;
  skip_ignored_files?: boolean;
  max_answer_chars?: number;
};
```

## é‡è¦ãªæ³¨æ„äº‹é …

- ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«ã¯ `.js` æ‹¡å¼µå­ã‚’ä½¿ç”¨: `from '../servers/serena/index.js'`
- ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æœ€å¾Œã«å¿…ãš `await closeClient()` ã‚’å‘¼ã³å‡ºã—ã¦ãã ã•ã„

````
