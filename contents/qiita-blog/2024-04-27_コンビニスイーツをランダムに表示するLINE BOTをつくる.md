---
title: "コンビニスイーツをランダムに表示するLINE BOTをつくる"
date: "2024-04-27"
description: ""
icon: ""
icon_url: ""
tags:
  - LINEmessagingAPI
  - CloudflareWorkers
slug: "b8db10277d8321ff4846"
---
# はじめに

以前CloudflareWorkers + Hono + LINE Messaging APIでセブンイレブンのアイスクリームをランダムに提案するLINE BOTを作りました。

https://zenn.dev/sui_water/articles/fac4334293a1c0

同じ要領で「コンビニスイーツをランダムに提案する」LINE BOTも作れるんじゃね？と思ったので作成していきます。

# 要件

- Flex Messageでスイーツの画像、名称、価格を表示して画像をタップすると商品ページへアクセスできる
- リッチメニューでセブンイレブンのスイーツ、ローソンのスイーツ、ファミリーマートのスイーツを押すと、対象のスイーツを取得できる
- 毎週火曜日にCron Triggersを使用して最新のスイーツ情報へ更新する
    - セブンイレブンの新商品が更新されているタイミング

# 実際に作成したもの

## QR

https://lin.ee/ANONJtN

## デモ

![20240427_105259.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3351724/bfdd0fd7-d647-1ddd-b22c-30ae67f991b2.gif)


## リポジトリ

https://github.com/Suntory-Y-Water/convenience-store-sweets-bot

# 感想

アイスクリームを返すLINE BOTを作ったときと同じ要領で作成したのでスピード感ある開発ができた

参照したいコンビニが増えたとしても、ページ構造を追加LINEのリッチメニューさえ変えれば動くような仕組みになっている

課題としては商品ページをHTMLRewriterで抜き出しているため、ページ構造が変わった瞬間に動かなくなってしまうところだけど良い案が思い浮かばなかった…

LINE BOT開発自体はおもろいので何かあればまたつくってみる

