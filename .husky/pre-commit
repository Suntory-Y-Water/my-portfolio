#!/usr/bin/env sh

# ãƒ–ãƒ­ã‚°ã‚¢ã‚¤ã‚³ãƒ³ã®è‡ªå‹•å¤‰æ›
# ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã•ã‚ŒãŸãƒ–ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’å‡¦ç†
STAGED_BLOG_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep 'contents/blog/.*\.md$' || true)

if [ -n "$STAGED_BLOG_FILES" ]; then
  echo "ğŸ”„ Converting blog icons..."
  bun run scripts/update-blog-icon.ts $STAGED_BLOG_FILES

  # å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†åº¦ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°
  echo "$STAGED_BLOG_FILES" | xargs git add
fi
